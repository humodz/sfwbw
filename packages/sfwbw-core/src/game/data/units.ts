import { Building, TileType, UnitType } from '../../types';
import { MovementType } from './terrain';
import { UnitWeapon } from './weapons';

// TODO - resupply costs

export interface UnitData {
  name: string;
  cost: number;
  vision: number;
  move: number;
  ammo: number;
  fuel: number;
  fuelPerDay: number;
  factory: UnitFactory;
  movementType: MovementType;
  transportType: TransportType;
  canSupply: boolean;
  canTransport?: {
    capacity: number;
    types: TransportType[];
    canLoadAt: TileType[];
  };
  weapons: UnitWeapon[];
}

export enum TransportType {
  INFANTRY = 'INFANTRY',
  VEHICLE = 'VEHICLE',
  COPTER = 'COPTER',
  NONE = 'NONE',
}

export enum UnitFactory {
  BASE_OR_HQ = 'BASE_OR_HQ',
  PORT = 'PORT',
  AIRPORT = 'AIRPORT',
  LAB = 'LAB',
  STATION = 'STATION',
}

export const unitData: Record<UnitType, UnitData> = {
  INFANTRY: {
    name: 'Infantry',
    cost: 1000,
    vision: 2,
    move: 3,
    ammo: 0,
    fuel: 99,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.BOOT,
    transportType: TransportType.INFANTRY,
    canSupply: false,
    weapons: [],
  },
  MECH: {
    name: 'Mech',
    cost: 3000,
    vision: 2,
    move: 2,
    ammo: 3,
    fuel: 70,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.BOOT,
    transportType: TransportType.INFANTRY,
    canSupply: false,
    weapons: [],
  },
  LIGHT_TANK: {
    name: 'Light Tank',
    cost: 6000,
    vision: 3,
    move: 6,
    ammo: 12,
    fuel: 70,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  MEDIUM_TANK: {
    name: 'Medium Tank',
    cost: 12000,
    vision: 2,
    move: 5,
    ammo: 10,
    fuel: 60,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  HEAVY_TANK: {
    name: 'Heavy Tank',
    cost: 18000,
    vision: 1,
    move: 4,
    ammo: 8,
    fuel: 50,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  PROTOTYPE_TANK: {
    name: 'Prototype Tank',
    cost: 0,
    vision: 2,
    move: 6,
    ammo: 12,
    fuel: 80,
    fuelPerDay: 0,
    factory: UnitFactory.LAB,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  ARTILLERY: {
    name: 'Artillery',
    cost: 7000,
    vision: 1,
    move: 4,
    ammo: 10,
    fuel: 50,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  ROCKET: {
    name: 'Rocket',
    cost: 15000,
    vision: 1,
    move: 4,
    ammo: 6,
    fuel: 50,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TIRE,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  TRAIN: {
    name: 'Train',
    cost: 30000,
    vision: 1,
    move: 15,
    ammo: 16,
    fuel: 99,
    fuelPerDay: 0,
    factory: UnitFactory.STATION,
    movementType: MovementType.TRAIN,
    transportType: TransportType.NONE,
    canSupply: false,
    canTransport: {
      capacity: 2,
      types: [TransportType.INFANTRY, TransportType.VEHICLE],
      canLoadAt: [TileType.STATION],
    },
    weapons: [],
  },
  FLAK: {
    name: 'Flak',
    cost: 6500,
    vision: 1,
    move: 4,
    ammo: 10,
    fuel: 50,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  MISSILE: {
    name: 'Missile',
    cost: 13000,
    vision: 1,
    move: 4,
    ammo: 6,
    fuel: 50,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TIRE,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  RECON: {
    name: 'Recon',
    cost: 3500,
    vision: 5,
    move: 8,
    ammo: 0,
    fuel: 80,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TIRE,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  ANTI_AIR: {
    name: 'Anti Air',
    cost: 8000,
    vision: 2,
    move: 6,
    ammo: 14,
    fuel: 60,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    weapons: [],
  },
  APC: {
    name: 'APC',
    cost: 5000,
    vision: 1,
    move: 6,
    ammo: 0,
    fuel: 70,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TREAD,
    transportType: TransportType.VEHICLE,
    canSupply: false,
    canTransport: {
      capacity: 1,
      types: [TransportType.INFANTRY],
      canLoadAt: Object.values(TileType),
    },
    weapons: [],
  },
  TRUCK: {
    name: 'Truck',
    cost: 4000,
    vision: 1,
    move: 8,
    ammo: 0,
    fuel: 60,
    fuelPerDay: 0,
    factory: UnitFactory.BASE_OR_HQ,
    movementType: MovementType.TIRE,
    transportType: TransportType.VEHICLE,
    canSupply: true,
    weapons: [],
  },
  FIGHTER: {
    name: 'Fighter',
    cost: 20000,
    vision: 2,
    move: 9,
    ammo: 10,
    fuel: 99,
    fuelPerDay: 5,
    factory: UnitFactory.AIRPORT,
    movementType: MovementType.AIR,
    transportType: TransportType.NONE,
    canSupply: false,
    weapons: [],
  },
  BOMBER: {
    name: 'Bomber',
    cost: 22000,
    vision: 1,
    move: 7,
    ammo: 16,
    fuel: 99,
    fuelPerDay: 5,
    factory: UnitFactory.AIRPORT,
    movementType: MovementType.AIR,
    transportType: TransportType.NONE,
    canSupply: false,
    weapons: [],
  },
  PLANE: {
    name: 'Plane',
    cost: 26000,
    vision: 1,
    move: 8,
    ammo: 6,
    fuel: 99,
    fuelPerDay: 5,
    factory: UnitFactory.AIRPORT,
    movementType: MovementType.AIR,
    transportType: TransportType.NONE,
    canSupply: false,
    weapons: [],
  },
  B_COPTER: {
    name: 'B Copter',
    cost: 8500,
    vision: 3,
    move: 6,
    ammo: 6,
    fuel: 80,
    fuelPerDay: 2,
    factory: UnitFactory.AIRPORT,
    movementType: MovementType.AIR,
    transportType: TransportType.NONE,
    canSupply: false,
    weapons: [],
  },
  T_COPTER: {
    name: 'T Copter',
    cost: 5500,
    vision: 2,
    move: 6,
    ammo: 0,
    fuel: 80,
    fuelPerDay: 2,
    factory: UnitFactory.AIRPORT,
    movementType: MovementType.AIR,
    transportType: TransportType.NONE,
    canSupply: false,
    canTransport: {
      capacity: 1,
      types: [TransportType.INFANTRY],
      // TODO - check bridge, rail, shoal
      canLoadAt: [...Object.values(Building), TileType.PLAINS, TileType.ROAD],
    },
    weapons: [],
  },
  BATTLESHIP: {
    name: 'Battleship',
    cost: 35000,
    vision: 3,
    move: 5,
    ammo: 18,
    fuel: 99,
    fuelPerDay: 1,
    factory: UnitFactory.PORT,
    movementType: MovementType.SHIP,
    transportType: TransportType.NONE,
    canSupply: false,
    weapons: [],
  },
  CRUISER: {
    name: 'Cruiser',
    cost: 22000,
    vision: 5,
    move: 6,
    ammo: 10,
    fuel: 99,
    fuelPerDay: 1,
    factory: UnitFactory.PORT,
    movementType: MovementType.SHIP,
    transportType: TransportType.NONE,
    canSupply: false,
    canTransport: {
      capacity: 1,
      types: [TransportType.COPTER],
      canLoadAt: Object.values(TileType),
    },
    weapons: [],
  },
  LANDER: {
    name: 'Lander',
    cost: 16500,
    vision: 1,
    move: 5,
    ammo: 0,
    fuel: 99,
    fuelPerDay: 1,
    factory: UnitFactory.PORT,
    movementType: MovementType.SHIP,
    transportType: TransportType.NONE,
    canSupply: false,
    canTransport: {
      capacity: 2,
      types: [TransportType.INFANTRY, TransportType.VEHICLE],
      canLoadAt: [TileType.PORT, TileType.SHOAL],
    },
    weapons: [],
  },
  SUBMARINE: {
    name: 'Submarine',
    cost: 24000,
    vision: 3,
    move: 4,
    ammo: 6,
    fuel: 99,
    fuelPerDay: 1,
    factory: UnitFactory.PORT,
    movementType: MovementType.SHIP,
    transportType: TransportType.NONE,
    canSupply: false,
    weapons: [],
  },
};
